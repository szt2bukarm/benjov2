import{useCallback as n,useEffect as t,useState as e,useMemo as r,useRef as o}from"react";import i from"@studio-freight/tempus";import u from"just-debounce-it";import{createNanoEvents as c}from"nanoevents";function a(e,r){var o=n(function(n){e.current&&!e.current.contains(n.target)&&r()},[e,r]);t(function(){if(e.current)return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o,e])}function f(){var n=e(!1),r=n[0],o=n[1];return t(function(){o(!0)},[]),r}function d(){var n=f();return r(function(){if(n){var t=window.location,e=t.href,r=new URLSearchParams(t.search),o=e.includes("#debug")||e.includes("/_debug")||r.has("debug")||"development"===process.env.NODE_ENV,i=e.includes("#production")||r.has("production");return o&&!i}},[n])}function v(){var n=e(),r=n[0],o=n[1];return t(function(){function n(){o(document.readyState)}return document.addEventListener("readystatechange",n,!1),n(),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),r}function s(n,e){void 0===e&&(e=0),t(function(){if(n)return i.add(n,e),function(){return i.remove(n)}},[n,e])}function l(r,i){var u=void 0===r?{}:r,c=u.root,a=void 0===c?null:c,f=u.rootMargin,d=void 0===f?"0px":f,v=u.threshold,s=void 0===v?0:v,l=u.once,h=void 0!==l&&l,m=u.lazy,w=void 0!==m&&m,g=u.callback,p=void 0===g?function(){}:g;void 0===i&&(i=[]);var b=o({}),y=e({}),z=y[0],P=y[1],E=e(),L=E[0],k=E[1];t(function(){if(L){var n=new IntersectionObserver(function(t){var e=t[0];w?b.current=e:P(e),p(e),h&&e.isIntersecting&&n.disconnect()},{root:a,rootMargin:d,threshold:s});return n.observe(L),function(){n.disconnect()}}},[L,a,d,s,w,h].concat(i));var x=n(function(){return b.current},[]);return[k,w?x:z]}function h(n,e,r){void 0===e&&(e=1e3),void 0===r&&(r=[]),t(function(){var t=setInterval(n,e);return function(){return clearInterval(t)}},[e].concat(r))}function m(){var n=e(),r=n[0],o=n[1];return t(function(){function n(){o("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)}return window.addEventListener("resize",n,!1),n(),function(){window.removeEventListener("resize",n,!1)}},[]),r}function w(n){var r=e(),o=r[0],i=r[1];return t(function(){var t=window.matchMedia(n);function e(){i(t.matches)}return t.addEventListener("change",e,!1),e(),function(){return t.removeEventListener("change",e,!1)}},[n]),o}function g(){return g=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},g.apply(this,arguments)}function p(n){"sticky"===getComputedStyle(n).position&&(n.style.setProperty("position","static"),n.dataset.sticky="true"),n.offsetParent&&p(n.offsetParent)}function b(n){var t;"true"===(null==n||null==(t=n.dataset)?void 0:t.sticky)&&(n.style.removeProperty("position"),n.dataset.sticky="true",delete n.dataset.sticky),n.parentNode&&b(n.parentNode)}function y(n,t){void 0===t&&(t=0);var e=t+n.offsetTop;return n.offsetParent?y(n.offsetParent,e):e}function z(n,t){void 0===t&&(t=0);var e=t+n.offsetLeft;return n.offsetParent?z(n.offsetParent,e):e}function P(n,t){void 0===t&&(t=0);var e=t+n.scrollTop;return n.offsetParent?P(n.offsetParent,e):e+window.scrollY}function E(n,t){void 0===t&&(t=0);var e=t+n.scrollLeft;return n.offsetParent?E(n.offsetParent,e):e+window.scrollX}var L=c();function k(r){var i=void 0===r?{}:r,c=i.ignoreTransform,a=void 0!==c&&c,f=i.ignoreSticky,d=void 0===f||f,v=i.debounce,s=void 0===v?500:v,l=i.lazy,h=void 0!==l&&l,m=i.callback,w=e(),k=w[0],x=w[1],O=o({}),S=e({}),R=S[0],M=S[1],B=n(function(n){var t,e,r,o,i,u=n.top,c=n.left,a=n.width,f=n.height,d=n.element;u=null!=(t=u)?t:O.current.top,c=null!=(e=c)?e:O.current.left,a=null!=(r=a)?r:O.current.width,f=null!=(o=f)?o:O.current.height,d=null!=(i=d)?i:O.current.element,u===O.current.top&&c===O.current.left&&a===O.current.width&&f===O.current.height&&d===O.current.element||(O.current.top=u,O.current.y=u,O.current.width=a,O.current.height=f,O.current.left=c,O.current.x=c,O.current.bottom=u+f,O.current.right=c+a,O.current.element=d,null==m||m(O.current),h||M(g({},O.current)))},[h]);t(function(){if(k){var n=k.getBoundingClientRect();B({width:n.width,height:n.height});var t=u(function(n){var t=n[0];B({width:t.borderBoxSize[0].inlineSize,height:t.borderBoxSize[0].blockSize})},s),e=new ResizeObserver(t);return e.observe(k),function(){e.disconnect(),t.cancel()}}},[k,s,B]);var T=e(),j=T[0],C=T[1],I=n(function(){if(k){var n,t;if(d&&p(k),a)n=y(k),t=z(k);else{var e=k.getBoundingClientRect();n=e.top+P(k),t=e.left+E(k)}d&&b(k),B({top:n,left:t,element:k})}},[a,d,k,B]);t(function(){I();var n=u(I,s),t=new ResizeObserver(n);return t.observe(null!=j?j:document.body),function(){t.disconnect(),n.cancel()}},[j,s,I]),t(function(){return L.on("resize",function(){if(k){var n=k.getBoundingClientRect();B({width:n.width,height:n.height}),I()}})},[k,I,B]);var N=n(function(){return O.current},[]);return[x,h?N:R,C]}function x(r){var i=void 0===r?{}:r,c=i.lazy,a=void 0!==c&&c,f=i.debounce,d=void 0===f?500:f,v=i.box,s=void 0===v?"border-box":v,l=i.callback,h=void 0===l?function(){}:l,m=o({}),w=e({}),g=w[0],p=w[1],b=e(),y=b[0],z=b[1];t(function(){if(y){var n=u(function(n){var t=n[0];m.current=t,h(t),a||p(t)},d,!0),t=new ResizeObserver(n);return t.observe(y,{box:s}),function(){t.disconnect(),n.cancel()}}},[y,a,d,s]);var P=n(function(){return m.current},[]);return[z,a?P:g]}function O(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var e=r(function(){return t&&[t].flat()},[t]),o=r(function(){return n&&[n].flat()},[n]);return r(function(){if(e&&o){var t=o.map(function(n){var t;return null==(t=e.find(function(t){return t.type===n}))?void 0:t.props.children});return n[0]?t:t[0]}},[e,o])}function S(n){void 0===n&&(n=500);var r=e(),o=r[0],i=r[1],c=e(),a=c[0],f=c[1];return t(function(){var t=u(function(){i(Math.min(window.innerWidth,document.documentElement.clientWidth)),f(Math.min(window.innerHeight,document.documentElement.clientHeight))},n);return window.addEventListener("resize",t,!1),t(),function(){return window.removeEventListener("resize",t,!1)}},[n]),{width:o,height:a}}k.resize=function(){L.emit("resize")};export{d as useDebug,v as useDocumentReadyState,s as useFrame,l as useIntersectionObserver,h as useInterval,f as useIsClient,m as useIsTouchDevice,w as useMediaQuery,a as useOutsideClickEvent,k as useRect,x as useResizeObserver,O as useSlots,S as useWindowSize};
//# sourceMappingURL=hamo.mjs.map
